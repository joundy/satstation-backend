import { Wallet } from "@satstation-backend/sdk";

async function main() {
  const bj = await import("bitcoinjs-lib");

  const wallet = new Wallet({
    mnemonic:
      "miss canal major invest model expose exhaust lyrics nephew strong stand buffalo",
    network: "regtest",
  });

  const p2wpkh = wallet.p2wpkh(10);
  console.log(p2wpkh.address);

  const psbt = bj.Psbt.fromHex(
    "70736274ff0100d4020000000219ca2aa057a70bc7cec896d9a698596b0aefc9a6603d328db5d706f56e98ef060000000000ffffffff3a0822a714a86e72b7e7e65ba346b930b94ab667aab76211f27a540cc16f07d50100000000ffffffff04e8030000000000001976a9145589f890b404551b3d8eab2968041e10ae9db32f88ace8030000000000001600147863a2ce28ce317274fe77fca72312fe6f7506c200000000000000000f6a5d0c00ad6e01fa833d0000000a01bddbf505000000001600144bef57fbbca16b8583a6e800bd8a0491268bc37c00000000000100fdac01020000000202e76189b4676c5d169be248a63e5927bcbbb2a5e1919441d5aeceb12aaa0ff6000000006a473044022033544ef3c5d9966483d56d4963698b0786e623d093e408c7bea0b22ad4d4cedd02200abc1d7b297afe758c920ae76a8a41dc285df5c801d271c347d38b913d3d13a70121033aa2d9b60cc862a72ee2f10340a12fd45e6f6b8a776e53c9a6288292ce5f93f9ffffffff02e76189b4676c5d169be248a63e5927bcbbb2a5e1919441d5aeceb12aaa0ff6030000006b483045022100b8754571785b7eb2fab3d44071fa4a27e1db10a7f7d7c5573215c14cb931b3ea02204b7e38100d6276da0848ad1ad3093331a9549d5204ef8413e6a75bee2a726796012102c7f075c111c5ee2806d9f1dcebd773c7b3212e041042b3ff677461da63e7ad97ffffffff04e8030000000000001976a9145589f890b404551b3d8eab2968041e10ae9db32f88ace8030000000000001600147863a2ce28ce317274fe77fca72312fe6f7506c200000000000000000f6a5d0c00ad6e0184843d0000000a01f5b0f505000000001976a91465abd89345b0a45bd8a5e0d16948b48ef5c5046688ac000000002202033aa2d9b60cc862a72ee2f10340a12fd45e6f6b8a776e53c9a6288292ce5f93f9483045022100f755859a4110e68a036f8aba87142aa54bdbde7fae0a8c2d6dcc7306b309250b02202098f143f802e1cf39d159b9b631bd282da90e6baed57742a61ce7c90aa7a2f8010001011f00e1f505000000001600144bef57fbbca16b8583a6e800bd8a0491268bc37c0000000000"
  );
  psbt.signInput(1, p2wpkh.keypair);
  psbt.finalizeAllInputs();

  const txHex = psbt.extractTransaction().toHex();
  console.log(txHex);
}
main();
